<!-- package-detail.component.html -->
<div class="container">
<h1 class="center-title">{{ title }}</h1>
<section>
  <mat-card appearance="outlined">
    <mat-card-content>
      <div class="example-row">
        <form class="example-form" (ngSubmit)="onSearch()">
          <mat-form-field class="example-full-width">
            <mat-label>Email</mat-label>
            <input type="text" matInput [formControl]="searchId" [errorStateMatcher]="matcher"
                   placeholder="Ex. pat@example.com">
            <mat-hint>Errors appear instantly!</mat-hint>
            <mat-error *ngIf="searchId.hasError('email') && !searchId.hasError('required')">
              Please enter a valid email address
            </mat-error>
            <mat-error *ngIf="searchId.hasError('required')">
              Package Id is <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <button type="submit" mat-fab extended>
            <mat-icon>search</mat-icon>
            Tracker
          </button>
        </form>
      </div>
      <div class="example-row example-flex-container">
        <div class="example-c-container package-info">
          <ng-container *ngIf="package !== null; else noPackage">
            <div class="content-container">
              <app-package-detail [package]="package"></app-package-detail>
            </div>
          </ng-container>
          <ng-template #noPackage>
            <div class="content-container">
              <p>Aucun package trouvé.</p>
            </div>
          </ng-template>
          <ng-container *ngIf="delivery !== null; else noDelivery">
            <div class="content-container">
              <app-delivery-detail [delivery]="delivery"></app-delivery-detail>
            </div>
          </ng-container>
          <ng-template #noDelivery>
            <div class="content-container">
              <p>Aucune livraison trouvée.</p>
            </div>
          </ng-template>
        </div>
        <div class="map-card">
            
          <app-google-maps></app-google-maps>
          </div>
        <div class="status-buttons">
          <div class="example-row">
            <button 
            type="submit" 
            [ngClass]="{'disabled-button': currentStatus !== 'open'}"
            [disabled]="currentStatus !== 'open'" 
            style="background-color: blue;" 
            mat-fab 
            (click)="changeStatus('picked-up')"
            >
              Picked Up
            </button>
          </div>
          
          <div class="example-row">
            <button 
            type="submit" 
            [ngClass]="{'disabled-button': currentStatus !== 'picked-up'}"
            [disabled]="currentStatus !== 'picked-up'" 
            style="background-color: darkorange;" 
            mat-fab (click)="changeStatus('in-transit')" 
            extended
            >
              In-Transit
            </button>
          </div>
          <div class="example-row">
            <button 
            type="submit" 
            [disabled]="currentStatus !== 'in-transit'" 
            [ngClass]="{'disabled-button': currentStatus !== 'in-transit'}"
            style="background-color: forestgreen" 
            mat-fab (click)="changeStatus('delivered')" 
            extended
            >
              Delivered
            </button>
          </div>
          <div class="example-row">
            <button 
            type="submit"
            [ngClass]="{'disabled-button': currentStatus !== 'in-transit'}" 
            [disabled]="currentStatus !== 'in-transit'" 
            style="background-color: crimson;" 
            mat-fab (click)="changeStatus('failed')" 
            extended
            >
              Failed
            </button>
          </div>
        </div>
      </div>
    </mat-card-content>
  </mat-card>
</section>
</div>